---
import "@fontsource-variable/montserrat";
import "@/styles/globals.css";
import Layout from "../layouts/Layout.astro";

// List of placeholder colors for gallery items with dates
const colors = [
  'bg-red-300',
  'bg-orange-300',
  'bg-yellow-300',
  'bg-green-300',
  'bg-teal-300',
  'bg-blue-300',
  'bg-indigo-300',
  'bg-purple-300',
  'bg-pink-300',
  'bg-gray-300',
  'bg-rose-300',
  'bg-lime-300',
];
// Assign a date to each photo (for grouping by year)
const photos = colors.map((bg, i) => ({
  bg,
  id: i,
  // sample dates cycling through years 2021-2023
  date: `${2021 + (i % 3)}-01-01`, 
}));
// Group photos by year
let groups = Object.values(
  photos.reduce((acc, photo) => {
    const year = new Date(photo.date).getFullYear().toString();
    if (!acc[year]) acc[year] = { year, items: [] };
    acc[year].items.push(photo);
    return acc;
  }, {} as Record<string, { year: string; items: typeof photos }>)
);
// Sort groups by year ascending (earliest first)
groups = groups.sort((a, b) => parseInt(b.year) - parseInt(a.year));
---
<Layout>
  <section class="font-neo-brutal bg-my-white overflow-hidden">
    <div class="max-w-7xl mx-auto px-6 py-12">
      <h1 class="inline-block text-4xl font-heading text-my-black border-4 border-black px-4 py-2">
        Gallery
      </h1>
      <div class="mt-8 space-y-12">
        {groups.map((group) => (
          <div key={group.year}>
            <h2 class="sticky top-20 z-10 bg-my-white text-2xl font-heading text-my-black border-b-4 border-black inline-block pb-1">
              {group.year}
            </h2>
            <div class="mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
              {group.items.map((photo) => (
                <div
                  key={photo.id}
                  class={`h-48 ${photo.bg} border-4 border-black shadow-[4px_4px_0_black] hover:translate-x-boxShadowX hover:translate-y-boxShadowY hover:shadow-none transition-transform`}
                />
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
</Layout>
